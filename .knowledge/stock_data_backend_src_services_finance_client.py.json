{"is_source_file": true, "format": "Python", "description": "This source file defines classes and functions for fetching historical stock data from various sources such as Stooq and Alpha Vantage. It includes data structures for representing price bars, client interfaces, specific client implementations, and a factory method for selecting the appropriate client based on configuration.", "external_files": ["src.config"], "external_methods": ["settings.FINANCE_API_PROVIDER", "settings.FINANCE_API_KEY", "settings.FINANCE_API_BASE_URL"], "published": ["get_finance_client"], "classes": [{"name": "PriceBar", "description": "Represents a single OHLCV (Open, High, Low, Close, Volume) bar for a specific date."}, {"name": "FinanceClient", "description": "Abstract base class defining the interface for fetching stock price data."}, {"name": "StooqClient", "description": "Concrete implementation of FinanceClient, fetching historical data from Stooq in CSV format."}, {"name": "AlphaVantageClient", "description": "Concrete implementation of FinanceClient, fetching historical data from Alpha Vantage API."}], "methods": [{"name": "str symbol_for_provider(self, ticker: str)", "description": "Maps a stock ticker symbol to the provider-specific symbol.", "scope": "StooqClient", "scopeKind": "class"}, {"name": "List[PriceBar] get_daily_bars( self, symbol: str, start: date, end: date )", "description": "Retrieves historical daily stock price data for the specified date range.", "scope": "FinanceClient", "scopeKind": "class"}, {"name": "FinanceClient get_finance_client()", "description": "Factory method to create and return a suitable FinanceClient instance based on configuration.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self, base_url: Optional[str] = None)", "scope": "StooqClient", "scopeKind": "class", "description": "unavailable"}, {"name": "None __init__(self, base_url: Optional[str] = None, api_key: Optional[str] = None)", "scope": "AlphaVantageClient", "scopeKind": "class", "description": "unavailable"}, {"name": "List[PriceBar] get_daily_bars(self, symbol: str, start: date, end: date)", "scope": "StooqClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] to_float(key_variants: Iterable[str])", "scope": "StooqClient.get_daily_bars", "scopeKind": "member", "description": "unavailable"}], "calls": ["httpx.Client", "r.raise_for_status", "r.text", "r.json", "datetime.strptime"], "search-terms": ["StooqClient", "AlphaVantageClient", "PriceBar", "get_finance_client", "symbol_for_provider"], "state": 2, "file_id": 7, "knowledge_revision": 50, "git_revision": "dc3e57ae9bbdaaec34dc98e637c39ebeccca0b98", "revision_history": [{"15": ""}, {"21": "dc3e57ae9bbdaaec34dc98e637c39ebeccca0b98"}, {"49": "dc3e57ae9bbdaaec34dc98e637c39ebeccca0b98"}, {"50": "dc3e57ae9bbdaaec34dc98e637c39ebeccca0b98"}], "ctags": [{"_type": "tag", "name": "AlphaVantageClient", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^class AlphaVantageClient(FinanceClient):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FinanceClient", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^class FinanceClient:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PriceBar", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^class PriceBar:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StooqClient", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^class StooqClient(FinanceClient):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def __init__(self, base_url: Optional[str] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, base_url: Optional[str] = None)", "scope": "StooqClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def __init__(self, base_url: Optional[str] = None, api_key: Optional[str] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, base_url: Optional[str] = None, api_key: Optional[str] = None)", "scope": "AlphaVantageClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_daily_bars", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def get_daily_bars($/", "language": "Python", "typeref": "typename:List[PriceBar]", "kind": "member", "signature": "( self, symbol: str, start: date, end: date )", "scope": "FinanceClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_daily_bars", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def get_daily_bars(self, symbol: str, start: date, end: date) -> List[PriceBar]:$/", "language": "Python", "typeref": "typename:List[PriceBar]", "kind": "member", "signature": "(self, symbol: str, start: date, end: date)", "scope": "AlphaVantageClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_daily_bars", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def get_daily_bars(self, symbol: str, start: date, end: date) -> List[PriceBar]:$/", "language": "Python", "typeref": "typename:List[PriceBar]", "kind": "member", "signature": "(self, symbol: str, start: date, end: date)", "scope": "StooqClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_finance_client", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^def get_finance_client() -> FinanceClient:$/", "language": "Python", "typeref": "typename:FinanceClient", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "symbol_for_provider", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def symbol_for_provider(self, ticker: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, ticker: str)", "scope": "AlphaVantageClient", "scopeKind": "class"}, {"_type": "tag", "name": "symbol_for_provider", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def symbol_for_provider(self, ticker: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, ticker: str)", "scope": "FinanceClient", "scopeKind": "class"}, {"_type": "tag", "name": "symbol_for_provider", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^    def symbol_for_provider(self, ticker: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, ticker: str)", "scope": "StooqClient", "scopeKind": "class"}, {"_type": "tag", "name": "to_float", "path": "/home/kavia/workspace/code-generation/stock-growth-analyzer-221696-221705/stock_data_backend/src/services/finance_client.py", "pattern": "/^                def to_float(key_variants: Iterable[str]) -> Optional[float]:$/", "file": true, "language": "Python", "typeref": "typename:Optional[float]", "kind": "function", "signature": "(key_variants: Iterable[str])", "scope": "StooqClient.get_daily_bars", "scopeKind": "member"}], "hash": "4be89b755cfd9b3cf3fab8d2db78d807", "format-version": 4, "code-base-name": "stock_data_backend", "filename": "stock_data_backend/src/services/finance_client.py"}